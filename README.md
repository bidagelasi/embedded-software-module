# 嵌入式软件模块
这个仓库存放的是一些嵌入式常用的软件模块，每个模块中都包含了一个例子，以帮助你理解模块的使用方法。

这些模块是笔者经过实际验证的，只需要付出少量的劳动就能方便的应用。

模块化编程的重要性不言而喻，不论这些模块对他人是否有用，我们在编写这些模块化程序的同时就已经达到目的了。如果你对这些程序模块有任何改进意见，或者有其他的模块化程序推荐，欢迎你向这个仓库推送。

## 索引
 - [优先队列在NB任务中的应用](#优先队列在处理NB任务中的应用)
 - [通用队列](#通用队列)
 - [用python对信号进行仿真分析](#用pyhton对信号进行仿真分析)
 - [datetime与计时器](#datetime与计时器)
 - [gpio模拟串口TX](#gpio模拟串口TX)
 - [软件定时器](#软件定时器)
 - [调试信息打印(通过蓝牙或者串口)](#调试信息打印)

## gpio模拟串口TX
该模块用MCU的一个普通gpio口实现了模拟串口TX的功能。该功能的用处在于在一些MCU缺乏硬件串口的情况下，用一个gpio来模拟串口TX，以输出调试信息或者把一些数据发送到对端MCU的串口接收端。

[gpio模拟串口TX](https://github.com/liuhao1946/embedded-software-module/tree/master/gpio%E6%A8%A1%E6%8B%9F%E4%B8%B2%E5%8F%A3TX)

## 软件定时器
该模块用于构建软件定时器。可以通过模块提供的API方便且灵活的构建、停止、启动定时任务。也可以轻易的应用于大多数MCU中。

[软件定时器](https://github.com/liuhao1946/embedded-software-module/tree/master/%E8%BD%AF%E4%BB%B6%E5%AE%9A%E6%97%B6%E5%99%A8)

## 通用队列
该模块实现了2种队列，一种有更广泛的使用场景（包括入队、出队、队列内容检索、队列内容删除等），另一种能在特殊时候相比前一种有更高的效率。两种队列都有良好的可移植性，可以轻易的应用在多数MCU中。

[通用队列](https://github.com/liuhao1946/embedded-software-module/tree/master/%E9%80%9A%E7%94%A8%E9%98%9F%E5%88%97)

## 调试信息打印
该模块实现了通过蓝牙或者串口打印调试信息的功能（串口打印到不稀奇，只是把它兼容进来让模块更通用一点而已）。之所以通过蓝牙打印调试信息，有两个用处。一个用处是方便进行bug跟踪，比如跟踪穿戴设备的软件运行情况时，你在戴着的时候是不大可能接个串口出来监控的。另外一个用处就是方便获取到传感器的数据，还是以穿戴设备为例，你可以把穿戴设备无干扰的戴在身上，然后通过蓝牙把传感器数据传输到电脑上，方便获取、保存。

[调试信息打印(通过蓝牙或者串口)](https://github.com/liuhao1946/embedded-software-module/tree/master/%E8%B0%83%E8%AF%95%E4%BF%A1%E6%81%AF%E6%89%93%E5%8D%B0(%E9%80%9A%E8%BF%87%E8%93%9D%E7%89%99%E6%88%96%E8%80%85%E4%B8%B2%E5%8F%A3))

## datetime与计时器
该模块实现了两个功能，一个是的计时功能，提供年、月、日、时、分、秒的计算与获取。一个是计时器功能，从0时0分0秒0毫秒开始，一直向上累计，以实现简单的计时功能。这两个功能的使用方法，见app_datetime.h中的说明。

[datetime与计时器](https://github.com/liuhao1946/embedded-software-module/tree/master/datetime%E4%B8%8E%E8%AE%A1%E6%97%B6%E5%99%A8)

## 优先队列在处理NB任务中的应用
该模块使用了优先队列实现了NB与MCU之间的通信。这样做的好处在于每个NB任务都有优先级。当NB任务的优先级同时，NB任务构成的就是一个先进先出的队列。当有一个更高优先级的NB任务出现时，更高优先级的任务会抢占低优先级的NB任务。

这样做有什么好处呢？假设你的NB模块有两部分，一个是GPS部分，一个是NB部分。当GPS在找星时，在GPS信号质量不佳时，需要较长时间才能拿到GPS坐标。如果在找星的时候突然有紧急的NB数据需要发送，这个时候最好的办法就是让发送NB数据的任务能暂时抢占GPS找星的任务，先把NB数据发出去，然后在回到找星任务。

这个模块除了具有任务抢占能力以外，还具有指令重发次数、超时时间设置、错误处理等功能。

事实上，这个模块的通信机制不仅仅能用在NB模块上，还可以用在如蓝牙、wifi、GSM等模块之上。如果花点时间，我想你可能会有收获。

## 用pyhton对信号进行仿真分析
该部分放置的是几篇关于怎么用python做信号仿真与分析的方法，包括滤波器设计、陷波器设计、FFT、希尔伯特变换与希尔伯特-黄变换、小波变换。

[用pyhton对信号进行仿真分析](https://github.com/liuhao1946/embedded-software-module/tree/master/%E7%94%A8python%E5%AF%B9%E4%BF%A1%E5%8F%B7%E8%BF%9B%E8%A1%8C%E4%BB%BF%E7%9C%9F%E5%88%86%E6%9E%90)






